<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ðŸŽ‚ Happy Birthday, William Bridge</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
    <style>
        @font-face {
            font-family: 'Jack Pirate';
            src: url('./assets/webfonts/jackpirate_personal_use_only-webfont.woff2') format('woff2'),
                url('./assets/webfonts/jackpirate_personal_use_only-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;

        }

        .wrapper h1 {
            font-family: 'Jack Pirate', serif;
            position: fixed;
            left: calc(50% - 25vw);
            top: calc(50% - 40vh);
            width: 50vw;
            height: 50vh;
            z-index: 1;
            text-align: center;
        }

        h1 span {
            display: block;
            font-size: 10vw;
        }

        @keyframes ship-sail {
            0% {
                left: -10vw;
            }

            100% {
                left: 110vw;
            }
        }

        @keyframes fade {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes sea-move {
            0% {
                left: -1vw;
            }

            50% {
                left: 0;
            }

            100% {
                left: -1vw;
            }
        }

        @keyframes cloud-move {
            0% {
                transform: translateY(-1vw);
            }

            50% {
                transform: 0;
            }

            100% {
                transform: translateY(-1vw);
            }
        }

        @keyframes fade-left {
            0% {
                opacity: 0;
                transform: translateX(-10vw);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }
        
        @keyframes fade-right {
            0% {
                opacity: 0;
                transform: translateX(10vw);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes fade-scale {
            0% {
                opacity: 0;
                transform: scale(0);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        * {
            margin: 0;
            padding: 0;
        }

        .wrapper {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: -100vw;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0;
            transition: top ease-in-out 2s, opacity ease-in-out 2s;
        }

        .wrapper.visible {
            opacity: 1;
            top: 0;
        }

        .sky {
            background: #87CEEB;
            position: relative;
            height: 80%;
        }

        .ship {
            width: 10vw;
            position: absolute;
            bottom: 0;
            animation: ship-sail 40s 3.5s ease-out both;
        }

        @media screen and (max-width: 768px) {
            @keyframes ship-sail {
                0% {
                    left: -25vw;
                }

                100% {
                    left: 125vw;
                }
            }

            .ship {
                width: 25vw;
            }
        }

        .sea {
            background: #53c3d9;
            height: 20%;
        }

        .sky::after {
            content: '';
            width: 101vw;
            height: 2vw;
            position: absolute;
            left: -0.5vw;
            bottom: 0;
            background-size: 25%;
            background-repeat: repeat-x;
            background-image: url("./assets/images/waves.svg");
            animation: sea-move 5s ease-out forwards infinite;
        }

        @media screen and (max-width: 768px) {
            .sky::after {
                background-size: 50%;
                height: 4vw;
            }
        }

        [class^="cloud"] {
            position: absolute;
            width: 25vw;
        }

        .clouds {
            width: 100vw;
            animation: sea-move 7.5s 3.5s ease-out both infinite;
        }

        .cloud-1 {
            left: 10vw;
            top: 10vh;
            animation: fade-left 2s ease-out forwards;
        }

        .cloud-2 {
            left: 65vw;
            top: 40vh;
            animation: fade-right 2.5s ease-out forwards;
        }

        .cloud-3 {
            left: 25vw;
            top: 45vh;
            animation: fade-left 2s 0.5s ease-out both;
        }

        @media screen and (max-width: 768px) {
            [class^="cloud"] {
                width: 50vw;
            }

            .cloud-2 {
                top: 30vh;
                left: 50vw;
            }
            
            .cloud-3 {
                left: 12.5vw;
            }
        }

        .sky::before {
            content: '';
            position: absolute;
            right: 10vw;
            top: 5vh;
            width: 10vw;
            height: 10vw;
            background: #ffce2a;
            background: radial-gradient(circle, rgba(255,206,42,1) 0%, rgba(255,206,42,1) 50%, rgba(255,206,42,0) 75%);
            border-radius: 100vw;
            animation: fade 3s ease-out both;
        }

        @media screen and (max-width: 768px) {
            .sky::before {
                width: 25vw;
                height: 25vw;
            }
        }

        #play {
            position: fixed;
            left: calc(50% - 25vw);
            top: calc(50% - 25vh);
            width: 50vw;
            height: 50vh;
            z-index: 1;
            transition: opacity 3s ease-in-out;
        }

        .active #play {
            opacity: 0;
        }

        h1 span {
            animation: fade-scale 1s ease-out both;
        }

        .actor, .sky::before, .sky::after, h1 span {
            animation-play-state: paused;
        }

        .active .actor, .active .sky::before, .active .sky::after, .active h1 span {
            animation-play-state: running;
        }

        h1 span:nth-child(1) {
            animation-delay: 14s;
        }

        h1 span:nth-child(2) {
            animation-delay: 14.5s;
        }

        h1 span:nth-child(3) {
            animation-delay: 15s;
        }

        :not(.visible) + .message {
            position: relative;
            z-index: 1;
        }

        .message nav ul {
            display: flex;
            list-style: none;
            margin: 50px auto 0;
        }

        .message nav li:not(:first-child)::before {
            content: '|';
            margin: 0 6px;
        }
    </style>
  </head>
  <body>
	<div class="wrapper visible" id="scene">
        <h1 class="actor">
            <span>Happy</span>
            <span>Birthday</span>
            <span>William</span>
        </h1>
        <svg id="play" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"/>
        </svg>
        <div class="sky">
            <span class="clouds">
                <img alt="" class="cloud-1 actor" src="./assets/images/cloud-1.svg" />
                <img alt="" class="cloud-2 actor" src="./assets/images/cloud-2.svg" />
                <img alt="" class="cloud-3 actor" src="./assets/images/cloud-3.svg" />
            </span>
            <img alt="" class="ship actor" src="./assets/images/ship.svg" />
        </div>
        <div class="sea"></div>
</div>
<div class="message">
    <h1>Dear William,</h1>
    <p>Happy Birthday ðŸŽ‚!</p>
    <p>The fact my go to reference for accordions is <a href="https://www.youtube.com/watch?v=B4j6oSR8MHw" target="_blank">Captain Pugwash</a> probably indicates I'm a bit out of my depth, so I won't embarrass myself with any recommendations.</a></p>
    <p>Have a brilliant birthday!</p>
    <p class="middle">Andrew&nbsp;<img class="circle" height="25px" src="https://secure.gravatar.com/avatar/4e40467570b0bd1bd73408b343549f04?size=35" /></p>
    <nav>
        <ul>
            <li><a href="./2019">2019</a></li>
            <li><a href="./2020">2020</a></li>
            <li><a href="./2021">2021</a></li>
        </ul>
    </nav>
</div>
<audio id="pugwash" src="./assets/audio/captain-pugwash.mp3"></audio>
<script type="text/javascript">
    const scene = document.getElementById('scene')
    const audio = document.getElementById('pugwash');
    const play = document.getElementById('play');

    play.addEventListener('click', () => {
        audio.play();
        scene.classList.add('active');
        let intervalId;
        let repetitions = 0;
        const handler = () => {
            repetitions++;
            scene.classList.remove('visible');
            audio.volume -= 0.1;
            if (audio.volume <= 0 || repetitions === 15) {
                clearInterval(intervalId);
                audio.pause();
            }
        };
        setTimeout(() => intervalId = setInterval(handler, 500), 35000);
    }, false);
</script>
  </body>
</html>